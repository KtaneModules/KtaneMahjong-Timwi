<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Mahjong — Keep Talking and Nobody Explodes Module</title>
    <meta name="viewport" content="initial-scale=1">
    <link rel='stylesheet' type='text/css' href='css/font.css'>
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src='js/highlighter.js'></script>
    <script src='js/ruleseed.js'></script>
    <style>
        img.tile {
            width: 1.1cm;
        }
        div.row {
            text-align: center;
            margin: .2cm 0;
        }
        p.caption {
            text-align: center;
            font-weight: bold;
            text-decoration: underline;
            margin: .5cm 0 .2cm;
        }
        ul {
            margin: 1cm 0 .5cm;
        }
        ul.first {
            margin-top: .5cm;
        }
        li {
            margin: .15cm 0;
        }
    </style>
    <script>
        var _tiles = "Bamboo 2,Plum,Green Dragon,Spring,Bamboo 3,Winter,Bamboo,Bamboo 4,Bamboo 5,Bamboo 6,Bamboo 7,Bamboo 8,Summer,Bamboo 9,Bamboo 1,Char 1,Char 2,Orchid,Fall,Char 3,West,Char 4,Char 5,Char 6,Char 7,Char 8,Char 9,Wheel 1,Wheel 2,Wheel 3,Chrysanthemum,Wheel 4,Wheel 5,Wheel 6,Wheel 7,Wheel 8,Wheel 9,East,South,Red Dragon,White Dragon,North".split(',');

        function setDefaultRules(rnd) { setRules(rnd); }
        function setRules(rnd)
        {
            var skip = rnd.next(0, 100);
            for (var i = 0; i < skip; i++)
                rnd.nextDouble();

            var tiles = _tiles.slice(0);
            rnd.shuffleFisherYates(tiles);

            var elems = document.getElementsByClassName('tile');
            for (var i = 0; i < 42; i++)
            {
                elems[i].setAttribute('src', `img/Mahjong/${tiles[i]}.png`);
                elems[i].setAttribute('title', `${tiles[i]}`);
            }
        }
    </script>
</head>
<body>
<div class="section">
    <div class="page page-bg-04">
        <div class="page-header">
            <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
            <span class="page-header-section-title">Mahjong</span>
        </div>
        <div class="page-content">
            <img src="img/Component/Mahjong.svg" class="diagram">
            <h2>On the Subject of Mahjong</h2>
            <p class="flavour-text">Plum, Orchid, Chrysanthemum, Bamboo. Remember that.</p>

            <ul class="first">
                <li>Take the first character of the serial number. If it’s a letter, take its alphabetic position and add 9. Take the result modulo 14.</li>
                <li>Find the Mahjong tile in that position in the first Match Row below, counting from 0.</li>
                <li>Perform the same calculation with the second character of the serial number and find the corresponding Mahjong tile in the second Match Row.</li>
                <li>Swap those two tiles.</li>
                <li>Do the same again with the third and fourth character, then once more with the fifth and sixth.</li>
            </ul>

            <p class="caption">Match Rows</p>
            <div class="row">
                <img class="tile" src="img/Mahjong/Char 1.png" title="Char 1">
                <img class="tile" src="img/Mahjong/Bamboo 5.png" title="Bamboo 5">
                <img class="tile" src="img/Mahjong/Wheel 5.png" title="Wheel 5">
                <img class="tile" src="img/Mahjong/Bamboo 8.png" title="Bamboo 8">
                <img class="tile" src="img/Mahjong/Bamboo 2.png" title="Bamboo 2">
                <img class="tile" src="img/Mahjong/Char 9.png" title="Char 9">
                <img class="tile" src="img/Mahjong/Red Dragon.png" title="Red Dragon">
                <img class="tile" src="img/Mahjong/Bamboo 6.png" title="Bamboo 6">
                <img class="tile" src="img/Mahjong/Bamboo 4.png" title="Bamboo 4">
                <img class="tile" src="img/Mahjong/Wheel 4.png" title="Wheel 4">
                <img class="tile" src="img/Mahjong/Char 6.png" title="Char 6">
                <img class="tile" src="img/Mahjong/Char 2.png" title="Char 2">
                <img class="tile" src="img/Mahjong/Wheel 2.png" title="Wheel 2">
                <img class="tile" src="img/Mahjong/Char 3.png" title="Char 3">
            </div>
            <div class="row">
                <img class="tile" src="img/Mahjong/Wheel 9.png" title="Wheel 9">
                <img class="tile" src="img/Mahjong/Wheel 1.png" title="Wheel 1">
                <img class="tile" src="img/Mahjong/Char 8.png" title="Char 8">
                <img class="tile" src="img/Mahjong/Wheel 7.png" title="Wheel 7">
                <img class="tile" src="img/Mahjong/Bamboo 9.png" title="Bamboo 9">
                <img class="tile" src="img/Mahjong/Bamboo 7.png" title="Bamboo 7">
                <img class="tile" src="img/Mahjong/Char 7.png" title="Char 7">
                <img class="tile" src="img/Mahjong/White Dragon.png" title="White Dragon">
                <img class="tile" src="img/Mahjong/Char 4.png" title="Char 4">
                <img class="tile" src="img/Mahjong/Bamboo 3.png" title="Bamboo 3">
                <img class="tile" src="img/Mahjong/Wheel 8.png" title="Wheel 8">
                <img class="tile" src="img/Mahjong/Wheel 3.png" title="Wheel 3">
                <img class="tile" src="img/Mahjong/Wheel 6.png" title="Wheel 6">
                <img class="tile" src="img/Mahjong/Char 5.png" title="Char 5">
            </div>

            <ul>
                <li>Identify the extra tile in the bottom-left corner of the module and determine its position in the Counting Row below, counting from 0.</li>
                <li>Cycle the bottom Match Row forward that many tiles.</li>
            </ul>

            <p class="caption">Counting Row</p>
            <div class="row">
                <img class="tile" src="img/Mahjong/Bamboo 1.png" title="Bamboo 1">
                <img class="tile" src="img/Mahjong/Plum.png" title="Plum">
                <img class="tile" src="img/Mahjong/Orchid.png" title="Orchid">
                <img class="tile" src="img/Mahjong/Chrysanthemum.png" title="Chrysanthemum">
                <img class="tile" src="img/Mahjong/Bamboo.png" title="Bamboo">
                <img class="tile" src="img/Mahjong/Spring.png" title="Spring">
                <img class="tile" src="img/Mahjong/Summer.png" title="Summer">
                <img class="tile" src="img/Mahjong/Fall.png" title="Fall">
                <img class="tile" src="img/Mahjong/Winter.png" title="Winter">
                <img class="tile" src="img/Mahjong/North.png" title="North">
                <img class="tile" src="img/Mahjong/East.png" title="East">
                <img class="tile" src="img/Mahjong/South.png" title="South">
                <img class="tile" src="img/Mahjong/West.png" title="West">
                <img class="tile" src="img/Mahjong/Green Dragon.png" title="Green Dragon">
            </div>

            <ul>
                <li>On the module, a tile is “<em>available</em>” if there is no tile adjacent to its immediate left or right, and no tile is (even partially) on top of it.</li>
                <li>Select pairs of <em>available</em> tiles on the module whose likenesses are vertically aligned in the modified Match Rows.</li>
                <li>A correct pair disappears. An incorrect pair incurs a strike.</li>
                <li>Once all tiles are eliminated, the module is disarmed.</li>
            </ul>

        </div>
        <div class="page-footer relative-footer">Page 1 of 1</div>
    </div>
</div>
</body></html>
